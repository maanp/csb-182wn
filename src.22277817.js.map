{"version":3,"sources":["src/index.js"],"names":["width","height","canvas","document","getElementById","ctx","getContext","forces","particles","nParticles","p","V2","x","y","vector","n","Particle","position","velocity","acceleration","alpha","color","points","Math","random","add","reset","floor","index","force","applyForce","globalAlpha","beginPath","moveTo","lineTo","closePath","fillStyle","fill","resize","window","innerWidth","innerHeight","initForces","i","length","splice","updateForces","t","initParticles","push","drawParticles","update","follow","draw","launchParticle","emitter","updateEmitter","lerp","mouse","animate","clearRect","requestAnimationFrame","pointerMove","e","touches","pageX","pageY","addEventListener"],"mappings":"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","file":"src.22277817.js","sourceRoot":"..","sourcesContent":["const canvas = document.getElementById(\"canvas\");\nconst ctx = canvas.getContext(\"2d\");\nlet width, height;\nlet forces = [],\n  particles = [];\nlet nParticles = 250;\nlet p = 0;\n\n// noise.seed(Math.random());\n\nclass V2 {\n  constructor(x, y) {\n    this.x = x || 0;\n    this.y = y || 0;\n  }\n  add(vector) {\n    this.x += vector.x;\n    this.y += vector.y;\n  }\n  reset(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  lerp(vector, n) {\n    this.x += (vector.x - this.x) * n;\n    this.y += (vector.y - this.y) * n;\n  }\n}\n\nclass Particle {\n  constructor(x, y) {\n    this.position = new V2(-100, -100);\n    this.velocity = new V2();\n    this.acceleration = new V2();\n    this.alpha = 0;\n    this.color = \"#000000\";\n    this.points = [\n      new V2(-10 + Math.random() * 20, -10 + Math.random() * 20),\n      new V2(-10 + Math.random() * 20, -10 + Math.random() * 20),\n      new V2(-10 + Math.random() * 20, -10 + Math.random() * 20)\n    ];\n  }\n\n  update() {\n    this.velocity.add(this.acceleration);\n    this.position.add(this.velocity);\n    this.acceleration.reset(0, 0);\n    this.alpha -= 0.008;\n    if (this.alpha < 0) this.alpha = 0;\n  }\n\n  follow() {\n    var x = Math.floor(this.position.x / 20);\n    var y = Math.floor(this.position.y / 20);\n    var index = x * Math.floor(height / 20) + y;\n    var force = forces[index];\n    if (force) this.applyForce(force);\n  }\n\n  applyForce(force) {\n    this.acceleration.add(force);\n  }\n\n  draw() {\n    ctx.globalAlpha = this.alpha;\n    ctx.beginPath();\n    ctx.moveTo(\n      this.position.x + this.points[0].x,\n      this.position.y + this.points[0].y\n    );\n\n    ctx.lineTo(\n      this.position.x + this.points[1].x,\n      this.position.y + this.points[1].y\n    );\n\n    ctx.lineTo(\n      this.position.x + this.points[2].x,\n      this.position.y + this.points[2].y\n    );\n\n    ctx.closePath();\n    ctx.fillStyle = this.color;\n    ctx.fill();\n  }\n}\n\nconst resize = () => {\n  width = window.innerWidth;\n  height = window.innerHeight;\n  canvas.width = width;\n  canvas.height = height;\n  initForces();\n};\n\nconst initForces = () => {\n  var i = 0;\n  for (var x = 0; x < width; x += 20) {\n    for (var y = 0; y < height; y += 20) {\n      if (!forces[i]) forces[i] = new V2();\n      i++;\n    }\n  }\n\n  if (i < forces.length) {\n    forces.splice(i + 1);\n  }\n};\n\nconst updateForces = (t) => {\n  var i = 0;\n  var xOff = 0,\n    yOff = 0;\n  for (var x = 0; x < width; x += 20) {\n    xOff += 0.1;\n    for (var y = 0; y < height; y += 20) {\n      yOff += 0.1;\n      // let a = noise.perlin3(xOff, yOff, t * 0.00005) * Math.PI * 4;\n      // if (forces[i]) forces[i].reset(Math.cos(a) * 0.1, Math.sin(a) * 0.1);\n      i++;\n    }\n  }\n};\n\nconst initParticles = () => {\n  for (var i = 0; i < nParticles; i++) {\n    particles.push(new Particle(Math.random() * width, Math.random() * height));\n    particles[i].velocity.y = 0.1;\n  }\n};\n\nconst drawParticles = () => {\n  for (var i = 0; i < nParticles; i++) {\n    particles[i].update();\n    particles[i].follow();\n    particles[i].draw();\n  }\n};\n\nconst launchParticle = () => {\n  particles[p].position.reset(emitter.x, emitter.y);\n  particles[p].velocity.reset(-1 + Math.random() * 2, -1 + Math.random() * 2);\n  particles[p].color = `hsl(${Math.floor((emitter.x / width) * 256)},40%,${\n    60 + Math.random() * 20\n  }%)`;\n  particles[p].alpha = 1;\n  p++;\n  if (p === nParticles) p = 0;\n};\n\nconst updateEmitter = () => {\n  emitter.lerp(mouse, 0.2);\n};\n\nconst animate = (t) => {\n  ctx.clearRect(0, 0, width, height);\n  updateEmitter();\n  launchParticle();\n  launchParticle();\n  updateForces(t);\n  drawParticles();\n  requestAnimationFrame(animate);\n};\n\nconst pointerMove = (e) => {\n  mouse.x = e.touches ? e.touches[0].pageX : e.pageX;\n  mouse.y = e.touches ? e.touches[0].pageY : e.pageY;\n};\n\nlet mouse = new V2(window.innerWidth / 2, window.innerHeight / 2);\nlet emitter = new V2(window.innerWidth / 2, window.innerHeight / 2);\nresize();\ninitParticles();\nrequestAnimationFrame(animate);\n\nwindow.addEventListener(\"resize\", resize);\nwindow.addEventListener(\"mousemove\", pointerMove);\nwindow.addEventListener(\"touchmove\", pointerMove);\n"]}